package com.My

import org.json4s.DefaultFormats
import org.json4s.native.JsonMethods.parse

/**
  * Created by:
  * User: liuzhao
  * Date: 2018/5/22
  * Email: liuzhao@66law.cn
  */
object test {
  implicit val formats = DefaultFormats

  def main(args: Array[String]): Unit = {
    val text =
      """
        |{"elements":[{"comments":{"generic":{"typeName":"cml","definition":{"dtdId":"feedback/1","value":"<co-content><text>This course is an best  introduction to machine learning I have learned, although which is pretty easier than CS229 in Stanford. So, next, I would learn CS229 in opening course online, but it's pretty that accessible online videos abut CS229 haven't update for many years  and finally to study the opening courses on the deeplearning.ai. Thanks  AP Andrew NG for providing so amazing courses  free and it's a good chance to enjoy carefully designed courses particularly for students from not-developed countries.</text></co-content>"}}},"feedbackSystem":"STAR","rating":{"maxValue":5,"active":true,"value":5},"userId":12538392,"context":{"typeName":"courseContext","definition":{"courseId":"Gtv4Xb1-EeS-ViIACwYKVQ"}},"id":"12538392~courseContext!~Gtv4Xb1-EeS-ViIACwYKVQ~STAR","timestamp":1526826861688},{"comments":{"generic":{"typeName":"cml","definition":{"dtdId":"feedback/1","value":"<co-content><text>It was a great course. Andrew sir's teaching was great. He explained each thing from basic, like coming to the level of student and teaching it. The quiz and the programming exercises were great practice. One thing I want to suggest is to add more and better programming exercises.</text></co-content>"}}},"feedbackSystem":"STAR","rating":{"maxValue":5,"active":true,"value":5},"userId":33702513,"context":{"typeName":"courseContext","definition":{"courseId":"Gtv4Xb1-EeS-ViIACwYKVQ"}},"id":"33702513~courseContext!~Gtv4Xb1-EeS-ViIACwYKVQ~STAR","timestamp":1526823712482},{"comments":{"generic":{"typeName":"cml","definition":{"dtdId":"feedback/1","value":"<co-content><text>The Best online course I have ever had. Learned a lot from it. Thank Andrew Ng for giving such a wonderful course to us. </text></co-content>"}}},"feedbackSystem":"STAR","rating":{"maxValue":5,"active":true,"value":5},"userId":24597138,"context":{"typeName":"courseContext","definition":{"courseId":"Gtv4Xb1-EeS-ViIACwYKVQ"}},"id":"24597138~courseContext!~Gtv4Xb1-EeS-ViIACwYKVQ~STAR","timestamp":1526823243525},{"comments":{"generic":{"typeName":"cml","definition":{"dtdId":"feedback/1","value":"<co-content><text>This is one of the best training I have e</text></co-content>"}}},"feedbackSystem":"STAR","rating":{"maxValue":5,"active":true,"value":5},"userId":30378418,"context":{"typeName":"courseContext","definition":{"courseId":"Gtv4Xb1-EeS-ViIACwYKVQ"}},"id":"30378418~courseContext!~Gtv4Xb1-EeS-ViIACwYKVQ~STAR","timestamp":1526822348835},{"comments":{"generic":{"typeName":"cml","definition":{"dtdId":"feedback/1","value":"<co-content><text>An excellent course and a great starting point to the subject.  True that you don't need to know all the math, but it helps.  Linear algebra is especially useful to know.  Andrew Ng is an inspiration teacher and provides the right amount of contextual information so you never question why you are learning a particular topic.  Upon completing, you'll want to learn more.</text></co-content>"}}},"feedbackSystem":"STAR","rating":{"maxValue":5,"active":true,"value":5},"userId":27504773,"context":{"typeName":"courseContext","definition":{"courseId":"Gtv4Xb1-EeS-ViIACwYKVQ"}},"id":"27504773~courseContext!~Gtv4Xb1-EeS-ViIACwYKVQ~STAR","timestamp":1526816394996},{"comments":{"generic":{"typeName":"cml","definition":{"dtdId":"feedback/1","value":"<co-content><text>Thank you very much for your immense effort to\nbuild this incredible useful and practical oriented course. I’ve learned a lot\nand had a great time. Yours sincerely, Sascha Denker</text></co-content>"}}},"feedbackSystem":"STAR","rating":{"maxValue":5,"active":true,"value":5},"userId":32305223,"context":{"typeName":"courseContext","definition":{"courseId":"Gtv4Xb1-EeS-ViIACwYKVQ"}},"id":"32305223~courseContext!~Gtv4Xb1-EeS-ViIACwYKVQ~STAR","timestamp":1526816064366},{"comments":{"generic":{"typeName":"cml","definition":{"dtdId":"feedback/1","value":"<co-content><text>the professor and his knowledge is awesome</text></co-content>"}}},"feedbackSystem":"STAR","rating":{"maxValue":5,"active":true,"value":5},"userId":6201367,"context":{"typeName":"courseContext","definition":{"courseId":"Gtv4Xb1-EeS-ViIACwYKVQ"}},"id":"6201367~courseContext!~Gtv4Xb1-EeS-ViIACwYKVQ~STAR","timestamp":1526811051955},{"comments":{"generic":{"typeName":"cml","definition":{"dtdId":"feedback/1","value":"<co-content><text>Course was Awesome. I learned a lot. Mr. Andrew Ng and other mentors helped so much to understand this course. </text></co-content>"}}},"feedbackSystem":"STAR","rating":{"maxValue":5,"active":true,"value":4},"userId":5369394,"context":{"typeName":"courseContext","definition":{"courseId":"Gtv4Xb1-EeS-ViIACwYKVQ"}},"id":"5369394~courseContext!~Gtv4Xb1-EeS-ViIACwYKVQ~STAR","timestamp":1526807835502},{"comments":{"generic":{"typeName":"cml","definition":{"dtdId":"feedback/1","value":"<co-content><text>That course is really incredible. I like it so much, that now, I will have to take all the next ones (and I am already sure it will be a pleasure). I really appreciated that:</text><text> - the learning curve is smooth. And needed mathematical info is given (I left University a long time ago)</text><text> - exercises are relevant</text><text>- I am now used to listening Andrew every night, just like someone (interesting ;) ) sharing my flat</text><text/></co-content>"}}},"feedbackSystem":"STAR","rating":{"maxValue":5,"active":true,"value":5},"userId":33064019,"context":{"typeName":"courseContext","definition":{"courseId":"Gtv4Xb1-EeS-ViIACwYKVQ"}},"id":"33064019~courseContext!~Gtv4Xb1-EeS-ViIACwYKVQ~STAR","timestamp":1526807512506},{"comments":{"generic":{"typeName":"cml","definition":{"dtdId":"feedback/1","value":"<co-content><text>我学到了很多，也会向周围人推荐的</text></co-content>"}}},"feedbackSystem":"STAR","rating":{"maxValue":5,"active":true,"value":5},"userId":31799312,"context":{"typeName":"courseContext","definition":{"courseId":"Gtv4Xb1-EeS-ViIACwYKVQ"}},"id":"31799312~courseContext!~Gtv4Xb1-EeS-ViIACwYKVQ~STAR","timestamp":1526806862696}],"paging":{"next":"10","total":18353},"linked":{}}
      """.stripMargin
    val json = parse(text)

    val next = (json \ "paging" \ "next").extract[String].toInt
    val total = (json \ "paging" \ "total").extract[String].toInt

    val content = (json \ "elements" \ "comments" \ "generic" \ "definition" \ "value").extract[List[String]].map(_.replace("<co-content><text>", "").replace(" </text></co-content>", "").replace("</text><text>", " "))
    val star = (json \ "elements" \ "rating" \ "value").extract[List[Double]]
    val user = (json \ "elements" \ "userId").extract[List[Int]]
    println(star, user.map(_.toString))

  }
}
